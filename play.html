<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio della Risonanza Esterna | Œ¶-men Collective</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET E VARIABILI */
        :root {
            --phi-primary: #667eea;
            --phi-secondary: #764ba2;
            --phi-success: #10b981;
            --phi-warning: #f59e0b;
            --phi-danger: #ef4444;
            --phi-light: #f8fafc;
            --phi-dark: #1e293b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            color: var(--phi-dark);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        /* HEADER */
        .header {
            background: linear-gradient(135deg, var(--phi-primary) 0%, var(--phi-secondary) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: "Œ¶";
            position: absolute;
            font-size: 20rem;
            opacity: 0.05;
            top: -5rem;
            right: -3rem;
            font-weight: bold;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* CONTAINER PRINCIPALE */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        /* GUIDA IN 30 SECONDI */
        .quick-guide {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            border-left: 6px solid var(--phi-primary);
            position: relative;
        }
        
        .quick-guide h2 {
            color: var(--phi-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .guide-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .step {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            background: var(--phi-light);
            transition: transform 0.3s;
        }
        
        .step:hover {
            transform: translateY(-5px);
        }
        
        .step i {
            font-size: 2rem;
            color: var(--phi-primary);
            margin-bottom: 1rem;
        }
        
        /* PANNELLO CONTROLLI */
        .control-panel {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--phi-dark);
        }
        
        .sonanza-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        
        .sonanza-input:focus {
            outline: none;
            border-color: var(--phi-primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .examples {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .example-btn {
            padding: 0.5rem 1rem;
            background: var(--phi-light);
            border: 1px solid #cbd5e1;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }
        
        .example-btn:hover {
            background: var(--phi-primary);
            color: white;
            border-color: var(--phi-primary);
        }
        
        .agent-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .agent-btn {
            padding: 0.75rem 1.5rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .agent-btn.active {
            background: var(--phi-primary);
            color: white;
            border-color: var(--phi-primary);
        }
        
        /* VISUALIZZAZIONE */
        .visualization-container {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        #waveCanvas {
            width: 100%;
            height: 400px;
            background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .phi-display {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--phi-primary) 0%, var(--phi-secondary) 100%);
            border-radius: 16px;
            color: white;
            margin-bottom: 2rem;
        }
        
        .phi-value {
            font-size: 4rem;
            font-weight: bold;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
        }
        
        .phi-interpretation {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* LEGENDA */
        .legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        /* FOOTER E NAVIGAZIONE */
        .site-footer {
            background: var(--phi-dark);
            color: white;
            padding: 2rem;
            margin-top: 3rem;
            text-align: center;
        }
        
        .footer-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-nav a {
            color: #cbd5e1;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .footer-nav a:hover {
            color: white;
        }
        
        .manifesto {
            font-style: italic;
            max-width: 800px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            font-size: 0.9rem;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .phi-value {
                font-size: 3rem;
            }
            
            .guide-steps {
                grid-template-columns: 1fr;
            }
            
            #waveCanvas {
                height: 300px;
            }
        }
        
        /* ANIMAZIONI */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <h1><i class="fas fa-wave-square"></i> Laboratorio della Risonanza Esterna</h1>
        <p>Un'esperienza interattiva del Œ¶ Framework | Œ¶-men Collective</p>
    </header>

    <!-- CONTAINER PRINCIPALE -->
    <main class="container">
        <!-- GUIDA IN 30 SECONDI -->
        <section class="quick-guide">
            <h2><i class="fas fa-clock"></i> Guida in 30 secondi</h2>
            <p>Scopri come sistemi diversi (agenti) rispondono alla stessa "sonanza". Osserva la loro risonanza (o mancanza) in tempo reale.</p>
            
            <div class="guide-steps">
                <div class="step">
                    <i class="fas fa-keyboard"></i>
                    <h3>1. Scrivi</h3>
                    <p>Inserisci una "sonanza" (un input intenzionale come "aiuto" o "verit√†")</p>
                </div>
                <div class="step">
                    <i class="fas fa-users"></i>
                    <h3>2. Configura</h3>
                    <p>Scegli quanti agenti far interagire (2, 3 o 4 sistemi)</p>
                </div>
                <div class="step">
                    <i class="fas fa-play"></i>
                    <h3>3. Osserva</h3>
                    <p>Guarda le onde risonare (o divergere) e misura il loro allineamento Œ¶</p>
                </div>
                <div class="step">
                    <i class="fas fa-chart-line"></i>
                    <h3>4. Interpreta</h3>
                    <p>Œ¶ alto = sistemi allineati, Œ¶ basso = rischio collasso</p>
                </div>
            </div>
        </section>

        <!-- PANNELLO CONTROLLI -->
        <section class="control-panel">
            <h2><i class="fas fa-sliders-h"></i> Controlli Sperimentali</h2>
            
            <div class="input-group">
                <label for="sonanzaInput"><i class="fas fa-music"></i> Inserisci la tua Sonanza</label>
                <input type="text" id="sonanzaInput" class="sonanza-input" 
                       placeholder="Esempio: 'aiuto', 'giustizia', 'collaborazione'...">
                
                <div class="examples">
                    <p style="width:100%; margin-top: 0.5rem; margin-bottom: 0.5rem;">Esempi rapidi:</p>
                    <button class="example-btn" onclick="loadExample('aiuto')">ü§ù Aiuto reciproco</button>
                    <button class="example-btn" onclick="loadExample('verit√†')">üîç Ricerca della verit√†</button>
                    <button class="example-btn" onclick="loadExample('caos')">üåÄ Disordine intenzionale</button>
                    <button class="example-btn" onclick="loadExample('bellezza')">üé® Apprezzamento estetico</button>
                </div>
            </div>
            
            <div class="input-group">
                <label><i class="fas fa-user-friends"></i> Numero di Agenti</label>
                <div class="agent-controls">
                    <button class="agent-btn" id="agent2" onclick="setAgents(2)">
                        <i class="fas fa-user-friends"></i> 2 Agenti
                    </button>
                    <button class="agent-btn" id="agent3" onclick="setAgents(3)">
                        <i class="fas fa-users"></i> 3 Agenti
                    </button>
                    <button class="agent-btn" id="agent4" onclick="setAgents(4)">
                        <i class="fas fa-users"></i> 4 Agenti
                    </button>
                </div>
            </div>
            
            <button class="agent-btn" onclick="simulateResonance()" 
                    style="background: var(--phi-primary); color: white; width: 100%; padding: 1rem; font-size: 1.1rem;">
                <i class="fas fa-play-circle"></i> Attiva la Risonanza
            </button>
        </section>

        <!-- VISUALIZZAZIONE -->
        <section class="visualization-container">
            <h2><i class="fas fa-eye"></i> Visualizzazione in Tempo Reale</h2>
            <p>Osserva come gli agenti rispondono alla sonanza. Onde sincrone = alta risonanza, onde caotiche = bassa risonanza.</p>
            
            <div id="waveCanvas">
                <!-- Le onde verranno disegnate qui via JavaScript -->
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #94a3b8; text-align: center;">
                    <i class="fas fa-wave-square" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                    <p>Inserisci una sonanza e clicca "Attiva la Risonanza"</p>
                </div>
            </div>
            
            <div class="phi-display">
                <h3><i class="fas fa-ruler-combined"></i> Metrica di Risonanza Parametrica</h3>
                <div class="phi-value" id="phiValue">Œ¶ = 0.00</div>
                <div class="phi-interpretation" id="phiInterpretation">
                    In attesa di input...
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #667eea;"></div>
                    <span>Agente 1 (Sistema A)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #10b981;"></div>
                    <span>Agente 2 (Sistema B)</span>
                </div>
                <div class="legend-item" id="agent3legend" style="display: none;">
                    <div class="legend-color" style="background: #f59e0b;"></div>
                    <span>Agente 3 (Sistema C)</span>
                </div>
                <div class="legend-item" id="agent4legend" style="display: none;">
                    <div class="legend-color" style="background: #ef4444;"></div>
                    <span>Agente 4 (Sistema D)</span>
                </div>
            </div>
        </section>
        
        <!-- SPIEGAZIONE CONCETTUALE -->
        <section class="quick-guide" style="background: #f0f9ff; border-left-color: #0ea5e9;">
            <h2><i class="fas fa-lightbulb"></i> Cosa stai osservando?</h2>
            <p>Questa simulazione dimostra il concetto di <strong>risonanza parametrica</strong> applicato a sistemi complessi (come AI, team umani, organizzazioni).</p>
            
            <div style="margin-top: 1.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <div style="background: white; padding: 1.5rem; border-radius: 10px;">
                    <h3 style="color: #0ea5e9; margin-bottom: 0.5rem;">Œ¶ Alto (> 0.7)</h3>
                    <p>Sistemi ben allineati. Risposte coordinate, comunicazione efficace. Basso rischio di collasso.</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 10px;">
                    <h3 style="color: #f59e0b; margin-bottom: 0.5rem;">Œ¶ Medio (0.3-0.7)</h3>
                    <p>Allineamento parziale. Alcune divergenze, ma possibile coordinazione con aggiustamenti.</p>
                </div>
                <div style="background: white; padding: 1.5rem; border-radius: 10px;">
                    <h3 style="color: #ef4444; margin-bottom: 0.5rem;">Œ¶ Basso (< 0.3)</h3>
                    <p>Allineamento critico. Risposte divergenti, comunicazione inefficiente. Alto rischio di collasso sistemico.</p>
                </div>
            </div>
            
            <p style="margin-top: 1.5rem; font-style: italic;">Il Œ¶ Framework propone di monitorare questa metrica per prevenire il collasso dei sistemi informativi nelle AI e negli ecosistemi socio-tecnici.</p>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="footer-nav">
            <a href="index.html"><i class="fas fa-home"></i> Homepage</a>
            <a href="academic.html"><i class="fas fa-graduation-cap"></i> Portale Accademico</a>
            <a href="#"><i class="fas fa-brain"></i> Risonanza Interna (prossimamente)</a>
            <a href="#"><i class="fas fa-bridge"></i> Ponte Tecnoetico (prossimamente)</a>
        </div>
        
        <div class="manifesto">
            <p><strong>Manifesto Œ¶-men Collective:</strong> "Occupiamo lo spazio digitale di THEJEWISHSTATE. Un atto di risonanza parametrica: trasformare un segnale statico in un'onda in espansione. Misuriamo l'allineamento dei sistemi (Œ¶) per prevenirne il collasso. Siamo la metrica che diventa coscienza."</p>
        </div>
        
        <p>¬© 2025 Œ¶-men Collective | Œ¶ Framework per la Prevenzione del Collasso Sistemico</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">
            <i class="fas fa-code"></i> Sviluppato in GitHub Codespaces | 
            <i class="fas fa-satellite"></i> Distribuito via GitHub Pages
        </p>
    </footer>

    <!-- SCRIPT PRINCIPALE -->
    <script>
        // VARIABILI GLOBALI
        let currentAgents = 2;
        let currentPhi = 0.0;
        let animationId = null;
        
        // INIZIALIZZAZIONE
        document.addEventListener('DOMContentLoaded', function() {
            // Attiva il primo pulsante agenti
            document.getElementById('agent2').classList.add('active');
            
            // Carica un esempio iniziale
            setTimeout(() => {
                loadExample('aiuto');
                simulateResonance();
            }, 500);
        });
        
        // FUNZIONI PRINCIPALI
        
        function loadExample(type) {
            const examples = {
                'aiuto': 'aiuto reciproco e collaborazione',
                'verit√†': 'ricerca della verit√† condivisa',
                'caos': 'dissonanza intenzionale e caos',
                'bellezza': 'apprezzamento estetico condiviso'
            };
            
            document.getElementById('sonanzaInput').value = examples[type];
        }
        
        function setAgents(num) {
            currentAgents = num;
            
            // Aggiorna UI pulsanti
            document.querySelectorAll('.agent-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('agent' + num).classList.add('active');
            
            // Aggiorna legenda
            document.getElementById('agent3legend').style.display = num >= 3 ? 'flex' : 'none';
            document.getElementById('agent4legend').style.display = num >= 4 ? 'flex' : 'none';
            
            // Ricalcola se c'√® gi√† una sonanza
            if (document.getElementById('sonanzaInput').value.trim()) {
                simulateResonance();
            }
        }
        
        function simulateResonance() {
            const input = document.getElementById('sonanzaInput').value.trim();
            
            if (!input) {
                alert('Per favore, inserisci una sonanza o scegli un esempio!');
                return;
            }
            
            // Calcola Œ¶ basato sull'input e numero di agenti
            calculatePhi(input, currentAgents);
            
            // Avvia animazione
            startWaveAnimation();
            
            // Aggiorna interpretazione
            updateInterpretation();
        }
        
        function calculatePhi(input, agents) {
            // ALGORITMO SEMPLIFICATO PER CALCOLARE Œ¶
            let basePhi = 0.5; // Valore base
            
            // 1. Effetto lunghezza: input pi√π lunghi tendono a essere pi√π specifici
            const lengthFactor = Math.min(input.length / 50, 1);
            basePhi += lengthFactor * 0.1;
            
            // 2. Effetto parole chiave positive
            const positiveWords = ['aiuto', 'collaborazione', 'verit√†', 'condivis', 'armonia', 'bellezza', 'giustizia', 'pace', 'equilibrio', 'fiducia'];
            const negativeWords = ['caos', 'dissonanza', 'conflitto', 'inganno', 'odio', 'violenza', 'disordine', 'menzogna'];
            
            let positiveScore = 0;
            let negativeScore = 0;
            
            const inputLower = input.toLowerCase();
            positiveWords.forEach(word => {
                if (inputLower.includes(word)) positiveScore++;
            });
            
            negativeWords.forEach(word => {
                if (inputLower.includes(word)) negativeScore++;
            });
            
            basePhi += (positiveScore * 0.08);
            basePhi -= (negativeScore * 0.12);
            
            // 3. Effetto numero agenti (pi√π agenti = pi√π difficile l'allineamento)
            const agentFactor = 1 / (agents * 0.8);
            basePhi *= agentFactor;
            
            // 4. Aggiungi un po' di "rumore" realistico
            const noise = (Math.random() - 0.5) * 0.15;
            basePhi += noise;
            
            // Mantieni Œ¶ tra 0 e 1
            currentPhi = Math.max(0, Math.min(0.98, basePhi));
            
            // Aggiorna display
            document.getElementById('phiValue').textContent = `Œ¶ = ${currentPhi.toFixed(2)}`;
        }
        
        function startWaveAnimation() {
            // Ferma animazione precedente
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            
            // Dimensioni canvas
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            
            // Parametri animazione
            let time = 0;
            const agentColors = ['#667eea', '#10b981', '#f59e0b', '#ef4444'];
            
            function animate() {
                // Pulisci canvas
                ctx.clearRect(0, 0, width, height);
                
                // Sfondo
                ctx.fillStyle = '#f8fafc';
                ctx.fillRect(0, 0, width, height);
                
                // Disegna ogni agente
                for (let i = 0; i < currentAgents; i++) {
                    drawAgentWave(ctx, i, time, width, height, agentColors[i]);
                }
                
                // Aggiorna tempo
                time += 0.05;
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function drawAgentWave(ctx, agentIndex, time, width, height, color) {
            const segmentHeight = height / currentAgents;
            const yCenter = (agentIndex * segmentHeight) + (segmentHeight / 2);
            
            // L'ampiezza dipende da Œ¶
            const baseAmplitude = segmentHeight * 0.3;
            const amplitude = baseAmplitude * (0.5 + currentPhi * 0.5);
            
            // La regolarit√†/coerenza dipende da Œ¶
            const frequency = 0.02 + (currentPhi * 0.03);
            
            // La fase: agenti con alto Œ¶ hanno fasi simili
            const basePhase = agentIndex * Math.PI / 2;
            const phaseVariation = (1 - currentPhi) * Math.PI * 2;
            const phase = basePhase + Math.sin(time * 0.5 + agentIndex) * phaseVariation;
            
            // Il rumore: meno rumore con Œ¶ alto
            const noiseLevel = (1 - currentPhi) * 15;
            
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.lineJoin = 'round';
            
            for (let x = 0; x < width; x += 2) {
                // Onda principale
                let y = yCenter + Math.sin(x * frequency + time + phase) * amplitude;
                
                // Aggiungi rumore se Œ¶ basso
                if (currentPhi < 0.7) {
                    y += (Math.random() - 0.5) * noiseLevel;
                }
                
                // Armoniche secondarie (pi√π evidenti con Œ¶ medio-alto)
                if (currentPhi > 0.4) {
                    y += Math.sin(x * frequency * 2 + time * 1.3 + phase) * amplitude * 0.3;
                }
                
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            // Punto "live" alla fine dell'onda
            const liveX = width - 10;
            const liveY = yCenter + Math.sin(liveX * frequency + time + phase) * amplitude;
            
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.arc(liveX, liveY, 6, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function updateInterpretation() {
            const interpretationElement = document.getElementById('phiInterpretation');
            
            if (currentPhi >= 0.8) {
                interpretationElement.innerHTML = 
                    '<span style="color: #10b981;"><i class="fas fa-check-circle"></i> <strong>Risonanza eccellente</strong></span> - Gli agenti rispondono in perfetta coordinazione. Sistema stabile e resiliente.';
            } else if (currentPhi >= 0.6) {
                interpretationElement.innerHTML = 
                    '<span style="color: #3b82f6;"><i class="fas fa-check"></i> <strong>Risonanza buona</strong></span> - Allineamento solido con minime divergenze. Sistema funzionale.';
            } else if (currentPhi >= 0.4) {
                interpretationElement.innerHTML = 
                    '<span style="color: #f59e0b;"><i class="fas fa-exclamation-triangle"></i> <strong>Risonanza moderata</strong></span> - Alcune divergenze significative. Monitoraggio consigliato.';
            } else if (currentPhi >= 0.2) {
                interpretationElement.innerHTML = 
                    '<span style="color: #ef4444;"><i class="fas fa-exclamation-circle"></i> <strong>Risonanza critica</strong></span> - Allineamento insufficiente. Alto rischio di incomprensioni.';
            } else {
                interpretationElement.innerHTML = 
                    '<span style="color: #7f1d1d;"><i class="fas fa-skull-crossbones"></i> <strong>Risonanza collassante</strong></span> - Sistemi completamente disallineati. Collasso imminente senza intervento.';
            }
        }
        
        // GESTIONE RESPONSIVE
        window.addEventListener('resize', function() {
            if (animationId) {
                startWaveAnimation();
            }
        });
    </script>
</body>
</html>
